# 常见效果

## 选项卡切换

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1ggqtfovkxng30np0dwq61.gif)

### 方法1

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>选项卡切换页面结构</title>
    <link rel="stylesheet" href="reset.css">
    <style>
        #outer{
            width: 606px;
            margin: 0 auto;
            border: 1px solid #2ba5eb;
        }
        #title{
            overflow: hidden;
        }
        #title>h3{
            width: 200px;
            border: 1px solid #ccc;
            height: 50px;
            text-align: center;
            line-height: 50px;
            color: #333;
            float: left;
        }
        #con{

        }
        #con>li{
            width: 606px;
            height: 300px;
            text-align: center;
            line-height: 300px;
            font-size: 40px;
            font-weight: bold;
            display: none;
        }
        #title>.active{
            background-color: red;
            color: #fff;
        }
        #con>.show{
            display: block;
        }
    </style>

</head>
<body>
    <div id="outer">
        <div id="title">
            <h3 class="active">标题一</h3>
            <h3>标题二</h3>
            <h3>标题三</h3>
        </div>
        <ul id="con">
            <li class="show">内容一</li>
            <li>内容二</li>
            <li>内容三</li>
        </ul>
    </div>

    <script>
        var oTitle = document.getElementById("title");
        var oCon = document.getElementById("con");
        var oH3s = oTitle.getElementsByTagName("h3");
        var oLis = oCon.getElementsByTagName("li");
        // 外层这个for循环仍然是只绑定点击事件用的
        for (var i = 0; i < oH3s.length; i++) {
            // 这句话借用了 绑定事件的for循环，我们就可以少书写一个for循环
            oH3s[i].index = i;
            oH3s[i].onclick = function () {
                // 里边这个for循环 仅仅是遍历所有的h3和li 然后清空样式
                for (var i = 0; i < oH3s.length; i++) {
                    oH3s[i].className = "";
                    oLis[i].className = "";
                }
                this.className = "active";
                // this这个元素是它父级中的下标为几，那么oLis的下标就是几
                oLis[this.index].className = "show";
            }
        }
    </script>
</body>
</html>
```



### 方法2

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>选项卡切换页面结构</title>
    <link rel="stylesheet" href="reset.css">
    <style>
        #outer{
            width: 606px;
            margin: 0 auto;
            border: 1px solid #2ba5eb;
        }
        #title{
            overflow: hidden;
        }
        #title>h3{
            width: 200px;
            border: 1px solid #ccc;
            height: 50px;
            text-align: center;
            line-height: 50px;
            color: #333;
            float: left;
        }
        #con{

        }
        #con>li{
            width: 606px;
            height: 300px;
            text-align: center;
            line-height: 300px;
            font-size: 40px;
            font-weight: bold;
            display: none;
        }
        #title>.active{
            background-color: red;
            color: #fff;
        }
        #con>.show{
            display: block;
        }
    </style>

</head>
<body>
    <div id="outer">
        <div id="title">
            <h3 class="active">标题一</h3>
            <h3>标题二</h3>
            <h3>标题三</h3>
        </div>
        <ul id="con">
            <li class="show">内容一</li>
            <li>内容二</li>
            <li>内容三</li>
        </ul>
    </div>
    <script>
        var oTitle = document.getElementById("title");
        var oCon = document.getElementById("con");
        var oH3s = oTitle.getElementsByTagName("h3");
        var oLis = oCon.getElementsByTagName("li");

        //外层的for循环只是对所有的h3绑定了点击事件  没有其他任何的作用
        for (var i = 0; i < oH3s.length; i++) {
            // 对所有的h3绑定点击事件
            oH3s[i].onclick = function () {
                // 当事件发生的时候，for循环遍历所有的h3，判断当前点击的和哪一个相等，相等的添加类型 否则去掉类名
                for (var i = 0; i < oH3s.length; i++) {
                    if (oH3s[i] == this){
                        oH3s[i].className = "active";
                        oLis[i].className = "show";
                    }else{
                        oH3s[i].className = "";
                        oLis[i].className = "";
                    }
                }
            }
        }
    </script>
</body>
</html>
```



## 回到顶部

### 回到顶部基础版

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1ggt9xu4by9g30p50dwjtr.gif)

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>回到顶部基础版</title>
    <style>
        .box{
            width: 140px;
            height: 80px;
            background-color: red;
            border-radius: 50%;
            text-align: center;
            line-height: 80px;
            display: none;

            position: fixed;
            right: 0;
            bottom: 0;
        }

        .con{
            height: 3000px;
        }
    </style>
</head>
<body>
    <div class="box">
        回到顶部
    </div>
    <div class="con">
        hello <br>
        world <br>
    </div>
    <script>
        /*
        * 当滚动条的的距离没有大于200px的时候，box按钮不显示
        *
        * onscroll 是当滚动的时候触发事件
        * */
        var oBox = document.getElementsByClassName("box")[0];
        window.onscroll = function () {
            // console.log(1);
            if ((window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop) >= 200){
                oBox.style.display = "block";
            }else{
                oBox.style.display = "none";
            }
        }

        //点击box 直接让页面回到顶部   直接让滚轮变成0即可
        oBox.onclick = function () {
            window.scrollTo(0,0);
        }

    </script>
</body>
</html>
```



### 回到顶部动画版

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1ggta084m8xg30pf0dwdg1.gif)

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>回到顶部动画版</title>
    <style>
        .box{
            width: 140px;
            height: 80px;
            background-color: red;
            border-radius: 50%;
            text-align: center;
            line-height: 80px;
            display: none;

            position: fixed;
            right: 0;
            bottom: 0;
        }

        .con{
            height: 3000px;
        }
    </style>
</head>
<body>
    <div class="box">
        回到顶部
    </div>
    <div class="con">

    </div>
    <script>
        /*
        * 当滚动条的的距离没有大于200px的时候，box按钮不显示
        *
        * onscroll 是当滚动的时候触发事件
        * */
        var oBox = document.getElementsByClassName("box")[0];
        window.onscroll = function () {
            // console.log(1);
            if ((window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop) >= 200){
                oBox.style.display = "block";
            }else{
                oBox.style.display = "none";
            }
        }

        //点击box 直接让页面回到顶部  以动画的形式慢慢改变
        oBox.onclick = function () {
            var nowScroll = window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;
            var timer = setInterval(function () {
                nowScroll -= 10;//当前代表元素滚动条位置的变量 开始减
                if (nowScroll <= 0){
                    nowScroll = 0;
                    clearInterval(timer);
                }
                window.scrollTo(0,nowScroll);
            },1)
        }

    </script>
</body>
</html>
```



### 回到顶部通用动画版

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>回到顶部通用动画版</title>
    <style>
        .box{
            width: 140px;
            height: 80px;
            background-color: red;
            border-radius: 50%;
            text-align: center;
            line-height: 80px;
            display: none;

            position: fixed;
            right: 0;
            bottom: 0;
        }

        .con{
            height: 3000px;
        }
    </style>
</head>
<body>
    <div class="box">
        回到顶部
    </div>
    <div class="con">

    </div>
    <script>
        /*
        * 当滚动条的的距离没有大于200px的时候，box按钮不显示
        *
        * onscroll 是当滚动的时候触发事件
        * */
        var oBox = document.getElementsByClassName("box")[0];
        window.onscroll = function () {
            // console.log(1);
            if ((window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop) >= 200){
                oBox.style.display = "block";
            }else{
                oBox.style.display = "none";
            }
        }

        //点击box 直接让页面回到顶部  以动画的形式慢慢改变
        oBox.onclick = function () {
            //获取动画起始位置
            var startScroll = window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;

            //获取动画的结束位置
            var endScroll = 0;

            //定义起始步数
            var startStep = 0;

            //定义需要多少步走完  定义总步数
            var endStep = 40;

            //计算每一步所走的距离
            var everyStep = (endScroll - startScroll)/(endStep - startStep);

            var timer = setInterval(function () {
                startStep ++;
                //当起始步数 每次加1  等于结束步数的时候，说明动画已经到达终点
                if (startStep >= endStep){
                    clearInterval(timer);
                }
                startScroll += everyStep;
                window.scrollTo(0,startScroll);
            },1000/60)
        }

    </script>
</body>
</html>
```



## 侧边栏

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1ggudexl5dng30j30dwgpq.gif)

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        *{
            margin:0;
            padding: 0;
            list-style: none;
        }
        #box{
            position: fixed;
            right: 0;
            top: 200px;
        }
        #box li{
            position: relative;
            margin-bottom: 30px;
        }
        #box li span{
            width: 40px;
            height: 40px;
            background-color: deepskyblue;
            font-size: 14px;
            line-height: 40px;
            text-align: center;
            display: block;
            position: relative;
            z-index: 10;
            color: #ffffff;
        }
        #box li p{
            width: 120px;
            height: 40px;
            font-size: 18px;
            line-height: 40px;
            text-align: center;
            position: absolute;
            left: 0;
            top: 0;
            background-color: mediumvioletred;
            color: #fff;
        }
    </style>
</head>
<body>
    <ul id="box">
        <li>
            <span>反馈</span>
            <p>我的反馈</p>
        </li>
        <li>
            <span>反馈</span>
            <p>我的反馈</p>
        </li>
        <li>
            <span>反馈</span>
            <p>我的反馈</p>
        </li>
    </ul>
    <script>
        var box=document.getElementById("box");
        var lis=box.getElementsByTagName("li");
        var ps=box.getElementsByTagName("p");
        
        function move(i) {
            var conLeft=0;
            var timer1=null;
            lis[i].index=i;
            lis[i].onmouseenter=function () {
                clearInterval(timer1);
                var _this=this;
                timer1=setInterval(function () {
                    conLeft--;
                    if (conLeft<=-120) {
                        clearInterval(timer1);
                        conLeft=-120;
                    }
                    ps[_this.index].style.left=conLeft+"px";
                },1)
            }

            lis[i].onmouseleave=function () {
                clearInterval(timer1);
                var _this=this;
                timer1=setInterval(function () {
                    conLeft++;
                    if (conLeft>=0) {
                        clearInterval(timer1);
                        conLeft=0;
                    }
                    ps[_this.index].style.left=conLeft+"px";
                },1)
            }
        }

        for (var i = 0; i <lis.length ; i++) {
            move(i);
        }
    </script>
</body>
</html>
```



## Tab切换动画版

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1ggudorazwzg30st0dwe82.gif)

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>tab切换动画版</title>
    <style>
        *{
            margin: 0;
            padding:0;
            list-style: none;
        }
        .outer{
            width: 608px;
            margin: 0 auto;
            border: 1px solid #000;
        }
        #title{
            overflow: hidden;
        }
        #title h2{
            width: 150px;
            border: 1px solid red;
            float: left;
            height: 40px;
            font-size: 20px;
            line-height: 40px;
            text-align: center;
            color: #fff;
            background-color: #ccc;
            cursor: pointer;
        }
        #title .active{
            background-color: red;
        }
        #con{
            height: 350px;
            /*overflow-y: scroll;*/
            overflow: hidden;
        }
        #con li{
            height: 350px;
        }
        #con li img{
            width: 608px;
            height: 350px;
            display: block;
        }
    </style>
</head>
<body>
    <div class="outer">
        <div id="title">
            <h2 class="active">科技潮品</h2>
            <h2>司法拍卖</h2>
            <h2>爱逛街</h2>
            <h2>游戏动漫</h2>
        </div>
        <ul id="con">
            <li class="show"><img src="./images/01.png" alt=""></li>
            <li><img src="./images/02.png" alt=""></li>
            <li><img src="./images/03.png" alt=""></li>
            <li><img src="./images/04.png" alt=""></li>
        </ul>
    </div>
    <script>
        var oTitle = document.getElementById("title");
        var oCon = document.getElementById("con");
        var oH2s = oTitle.getElementsByTagName("h2");
        var oLis = oCon.getElementsByTagName("li");
        var timer = null;
        for (var i = 0; i < oH2s.length; i++) {
            oH2s[i].onclick = function () {
                clearInterval(timer);
                for (var j = 0; j < oH2s.length; j++) {
                    if (oH2s[j] == this){
                        oH2s[j].className = "active";
                        //获取起始位置
                        var start = oCon.scrollTop;
                        //获取结束位置
                        var end = j * oLis[0].offsetHeight;
                        //设置起始步数
                        var startStep = 0;
                        //设置总步数
                        var endStep = 40;
                        //计算每一步所走的距离
                        var everyStep = (end - start) / (endStep - startStep);
                        //进入计时器  让计时器每次运行都走 everyStep的距离  总共走endStep次 就可以执行完

                        timer = setInterval(function () {
                            // 每次进入计时器 让startStep++  用来保存执行次数
                            startStep ++;
                            // 临界值 当startStep等于endStep  那么说明运动完成
                            if (startStep >= endStep){
                                startStep = 0;
                                clearInterval(timer);
                            }
                            start += everyStep;
                            oCon.scrollTop = start;
                        },10)

                    }else{
                        oH2s[j].className = "";
                    }
                }
            }
        }
    </script>
</body>
</html>
```



## 碰壁反弹

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1ggudtgirksg30nz0dwabl.gif)

### 方法一

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>碰壁反弹</title>
    <style>
        #outer{
            width: 900px;
            height: 400px;
            background-color: #ccc;
            position: relative;
            margin: 0 auto;
            border:1px solid #000;
        }
        #box{
            width: 50px;
            height: 50px;
            background-color: indianred;
            position: absolute;
            left: 30px;
            top: 60px;
        }
    </style>
</head>
<body>
<div id="outer">
    <div id="box">

    </div>
</div>
<script>
    var oOuter = document.getElementById("outer");
    var oBox = document.getElementById("box");
    var timer = null;
    // 定义一个变量 保存x轴的位置
    var leftPoint = 30,topPoint = 60;
    //定义一个开关，如果目前向右走  那么值为true
    var isRight = true,isBottom = true;
    timer = setInterval(function () {
        if (isRight) {
            leftPoint ++;
            // 父级的宽度 减去 box 的宽度 就是box向右走最大的距离  临界值
            if (leftPoint >= oOuter.clientWidth - oBox.offsetWidth) {
                isRight = !isRight;
            }
        }else{
            leftPoint --;
            if (leftPoint <= 0){
                isRight = !isRight;
            }
        }


        if (isBottom) {
            topPoint ++;
            // 父级的宽度 减去 box 的宽度 就是box向右走最大的距离  临界值
            if (topPoint >= oOuter.clientHeight - oBox.offsetHeight) {
                isBottom = !isBottom;
            }
        }else{
            topPoint --;
            if (topPoint <= 0){
                isBottom = !isBottom;
            }
        }
        oBox.style.left = leftPoint + "px";
        oBox.style.top = topPoint + "px";
    },1)
</script>
</body>
</html>
```



### 方法二

```html
<body>
    <div class="wrap">
        <div class="box"></div>
    </div>

<script>
    // 获取元素
    var wrap = document.getElementsByTagName("div")[0];
    var box = document.getElementsByTagName("div")[1]; 

    //让元素动起来
    // 添加两个变量，用于更换运动方向
    var a = 1;
    var b = 1;
    // 获取元素的可运动空间，用父元素的宽高减去子元素的宽高
    var w = wrap.offsetWidth - box.offsetWidth;
    var h = wrap.offsetHeight - box.offsetHeight;

    // console.log(w,h);
    
    setInterval(function(){
        // 获取元素当前left
        var  l  = box.offsetLeft;
        if(l == w || l == 0){
            // 如果到达可运动空间最大值和最小值的时候，a 变成负值
            a *= -1;
        }
        // 把元素距离左边的值每10ms加1px
        // a变成负值可以改变运动方向
        box.style.left = l + a + "px";

        // 垂直方向同水平方向
        var t = box.offsetTop;
        if(t == h || t == 0){
            b *= -1;
        }
        box.style.top = t + b + "px";
    },10); 

</script>
</body>
```



## 无缝滚动

### 无缝滚动连续版

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1ggudz95u9hg31g50dw4qt.gif)

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>无缝滚动按钮鼠标控制版</title>
    <style>
        #outer{
            width: 1000px;
            border: 1px solid #000;
            margin: 100px auto;
            overflow: hidden;
        }
        #inner{
            width: 2500px;
            overflow: hidden;
        }
        #inner>img{
            width: 200px;
            height: 140px;
            float: left;
        }
    </style>
</head>
<body>
    <div id="outer">
        <div id="inner">
            <img src="../../images/01.jpg" alt="">
            <img src="../../images/02.jpg" alt="">
            <img src="../../images/03.jpg" alt="">
            <img src="../../images/04.jpg" alt="">
            <img src="../../images/05.jpg" alt="">
            <img src="../../images/01.jpg" alt="">
            <img src="../../images/02.jpg" alt="">
            <img src="../../images/03.jpg" alt="">
            <img src="../../images/04.jpg" alt="">
            <img src="../../images/05.jpg" alt="">
        </div>
    </div>
    <button id="left">向左</button>
    <button id="right">向右</button>
    <script>
        var oInner = document.getElementById("inner");
        var oOuter = document.getElementById("outer");
        var oLeft = document.getElementById("left");
        var oRight = document.getElementById("right");
        var oImg = oInner.getElementsByTagName("img");
        var timer = null;
        var flag = true;//定义一个变量保存方向 true代表向左走
        //给一个计时器，让元素每隔1个事件段，scroll就++

        //定义向左走函数
        function moveLeft(){
            timer = setInterval(function () {
                // oOuter.scrollLeft是数字类型，可读可写，可以直接运算和赋值
                oOuter.scrollLeft ++;
                // 判断当滚动条走了5张图片的宽度的时候，瞬间重新变成0
                if (oOuter.scrollLeft >= oImg[0].offsetWidth * 5){
                    oOuter.scrollLeft = 0;
                }
            },1)
        }

        //定义向右走函数：
        function moveRight(){
            timer = setInterval(function () {
                // oOuter.scrollLeft是数字类型，可读可写，可以直接运算和赋值
                oOuter.scrollLeft --;
                // 判断当滚动条走了5张图片的宽度的时候，瞬间重新变成0
                if (oOuter.scrollLeft <= 0){
                    oOuter.scrollLeft = oImg[0].offsetWidth * 5;
                }
            },1)
        }

        //刚进入页面执行向左走
        moveLeft();

        //点击向左走
        oLeft.onclick = function () {
            // 清除计时器
            clearInterval(timer);
            moveLeft();
            flag = true;
        }


        //点击向右走
        oRight.onclick = function () {
            // 清除计时器
            clearInterval(timer);
            moveRight();
            flag = false;
        }


        //鼠标移入outer中，让动画停止
        oOuter.onmouseenter = function () {
            //清除计时器就是让动画停止
            clearInterval(timer);
        }

        //鼠标移出的时候，继续执行
        oOuter.onmouseleave = function () {
            if (flag){
                moveLeft();
            } else{
                moveRight();
            }
        }
    </script>
</body>
</html>
```



### 无缝滚动间歇版

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1ggue3igma9g31ry0dw7wk.gif)

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>无缝间歇滚动基础版</title>
    <style>
        #outer{
            width: 1040px;
            border: 1px solid #000;
            margin: 100px auto;
            overflow: auto;
        }
        #inner{
            width: 2500px;
            overflow: hidden;
        }
        #inner>img{
            width: 200px;
            height: 140px;
            float: left;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div id="outer">
        <div id="inner">
            <img src="../../images/01.jpg" alt="">
            <img src="../../images/02.jpg" alt="">
            <img src="../../images/03.jpg" alt="">
            <img src="../../images/04.jpg" alt="">
            <img src="../../images/05.jpg" alt="">
            <img src="../../images/01.jpg" alt="">
            <img src="../../images/02.jpg" alt="">
            <img src="../../images/03.jpg" alt="">
            <img src="../../images/04.jpg" alt="">
            <img src="../../images/05.jpg" alt="">
        </div>
    </div>
    <script>
        var oInner = document.getElementById("inner");
        var oOuter = document.getElementById("outer");
        var oImg = oInner.getElementsByTagName("img");
        var timer = null;
        var timer2 = null;
        function move(){
            timer = setInterval(function () {
                oOuter.scrollLeft ++;
                if (oOuter.scrollLeft % (oImg[0].offsetWidth + 10) == 0){
                    clearInterval(timer);
                    //等待1s再继续走
                    // 递归调用本函数
                    timer2 = setTimeout(move,1000)
                }
                if (oOuter.scrollLeft >= (oImg[0].offsetWidth + 10) * 5) {
                    oOuter.scrollLeft = 0;
                }

            },1)
        }

        move()

    </script>
</body>
</html>
```





## 图片轮播

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1ggt98t2qx7g30np0dw1kx.gif)

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>图片轮播点击下标版</title>
    <style>
        *{
            margin: 0;
            padding: 0;
            list-style: none;
        }
        .outer{
            width: 520px;
            margin: 50px auto;
            border: 1px solid #000;
            position: relative;
        }
        .inner{
            width: 520px;
            overflow: auto;
        }
        .con{
            width: 3000px;
            overflow: hidden;
        }
        .con img{
            width: 520px;
            height: 280px;
            float: left;
        }

        .left{
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 0 100% 100% 0;
            left: 0;
            top: 50%;
            margin-top: -15px;
            text-align: center;
            line-height: 30px;
            color: #fff;
            background-color: rgba(200,40,156,.6);
        }
        .right{
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 100% 0  0 100%;
            right: 0;
            top: 50%;
            margin-top: -15px;
            text-align: center;
            line-height: 30px;
            color: #fff;
            background-color: rgba(200,40,156,.6);
        }

        .page{
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);

        }
        .page li{
            width: 10px;
            height: 10px;
            background-color: rgba(255,255,255,.3);
            margin: 5px;
            float: left;
        }
        .page .show{
            background-color: rgba(255,255,255,1);
        }
    </style>
</head>
<body>
<div class="outer">
    <div class="inner">
        <!--主要图片-->
        <div class="con">
            <img src="../images/01.jpg" alt="">
            <img src="../images/02.jpg" alt="">
            <img src="../images/03.jpg" alt="">
            <img src="../images/04.jpg" alt="">
            <img src="../images/05.jpg" alt="">
        </div>

        <!--左右按钮-->
        <p class="left">&lt;</p>
        <p class="right">&gt;</p>

        <!-- 列表项-->
        <ul class="page">
            <li class="show"></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </div>
</div>
<script>
    window.onload = function () {
        var oInner = document.querySelector(".inner");
        var oImgs = document.querySelectorAll(".con>img");
        var oLeft = document.querySelector(".left");
        var oRight = document.querySelector(".right");
        var oLis = document.querySelectorAll(".page>li");
        var timer1 = null;
        var timer2 = null;
        var i = 0;//代表图片  默认第一张

        // 图片更换动画函数
        function move(){
            //在每一个两秒内，不让滚动条直接走，而是以动画形式移动
            var start = oInner.scrollLeft;//当前滚动条的位置
            var end = i * oImgs[0].offsetWidth;//每次动画的结束位置
            var startStep = 0;
            var endStep = 44;
            var everyStep = (end - start) / (endStep - startStep);//每一步所走的距离

            //让滚动条条动画移动
            timer2 = setInterval(function () {
                startStep ++;//用来判断动画是否执行完毕
                if (startStep >= endStep) {
                    clearInterval(timer2);
                }

                // oInner.scrollLeft += everyStep;//scroll直接参与运算是向下取整的，start是默认当前滚动条位置，所以让变量start运算即可

                start += everyStep;
                oInner.scrollLeft = start;
            },20)
        }

        //自动走函数
        function autoMove(){
            //每隔两秒就换图
            timer1 = setInterval(function () {
                // 在每一次新的一个动画开始的时候，先把上一次的动画给清掉
                clearInterval(timer2);
                i ++;
                if (i >= oImgs.length){
                    i = 0;
                }
                move();
                page();
            },2000)
        };

        //清计时器
        function clear(){
            clearInterval(timer1);
            clearInterval(timer2);
        }

        //下标跟着走函数
        function page() {
            // 让下标跟着图片
            for (var j = 0; j < oLis.length; j++) {
                if( i == j ){
                    oLis[j].classList.add("show");
                }else{
                    oLis[j].classList.remove("show");
                }
            }
        }

        //页面加载后 自动走
        autoMove();

        //点击左边按钮
        oRight.onclick = function () {
            //先把所有计时器给清掉
            clear();
            i ++;
            if (i >= oImgs.length){
                i = 0;
            }
            move();
            page();
            //每次点击事件执行完成后，执行自动走
            autoMove();
        }

        //点击右边按钮
        oLeft.onclick = function(){
            clear();
            i --;
            if (i < 0){
                i = oImgs.length - 1;
            }
            move();
            page();
            autoMove();
        }


        //给下标绑定点击事件
        for (var j = 0; j < oLis.length; j++) {
            oLis[j].onclick = function () {
                clear();
                for (var k = 0; k < oLis.length; k++) {
                    if (oLis[k] == this){
                        oLis[k].classList.add("show");

                        //i是图片轮播的核心，所以让i和当前点击的下标相等
                        i = k
                        move();
                    }else{
                        oLis[k].classList.remove("show");
                    }
                }
            }
        }
    }
</script>
</body>
</html>
```



## 图片轮播无缝

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>图片轮播无缝版</title>
    <style>
        *{
            margin: 0;
            padding: 0;
            list-style: none;
        }
        .outer{
            width: 520px;
            margin: 50px auto;
            border: 1px solid #000;
            position: relative;
        }
        .inner{
            width: 520px;
            overflow: auto;
        }
        .con{
            width: 3500px;
            overflow: hidden;
        }
        .con img{
            width: 520px;
            height: 280px;
            float: left;
        }

        .left{
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 0 100% 100% 0;
            left: 0;
            top: 50%;
            margin-top: -15px;
            text-align: center;
            line-height: 30px;
            color: #fff;
            background-color: rgba(200,40,156,.6);
        }
        .right{
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 100% 0  0 100%;
            right: 0;
            top: 50%;
            margin-top: -15px;
            text-align: center;
            line-height: 30px;
            color: #fff;
            background-color: rgba(200,40,156,.6);
        }

        .page{
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);

        }
        .page li{
            width: 10px;
            height: 10px;
            background-color: rgba(255,255,255,.3);
            margin: 5px;
            float: left;
        }
        .page .show{
            background-color: rgba(255,255,255,1);
        }
    </style>
</head>
<body>
<div class="outer">
    <div class="inner">
        <!--主要图片-->
        <div class="con">
            <img src="../images/01.jpg" alt="">
            <img src="../images/02.jpg" alt="">
            <img src="../images/03.jpg" alt="">
            <img src="../images/04.jpg" alt="">
            <img src="../images/05.jpg" alt="">
            <img src="../images/01.jpg" alt="">
        </div>

        <!--左右按钮-->
        <p class="left">&lt;</p>
        <p class="right">&gt;</p>

        <!-- 列表项-->
        <ul class="page">
            <li class="show"></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </div>
</div>
<script>
    window.onload = function () {
        var oInner = document.querySelector(".inner");
        var oImgs = document.querySelectorAll(".con>img");
        var oLeft = document.querySelector(".left");
        var oRight = document.querySelector(".right");
        var oLis = document.querySelectorAll(".page>li");
        var timer1 = null;
        var timer2 = null;
        var i = 0;//代表图片  默认第一张
        var flag = false;//定义一个开关，保存图片运动状态，默认运动

        // 图片更换动画函数
        function move(){
            flag = !flag;
            //在每一个两秒内，不让滚动条直接走，而是以动画形式移动
            var start = oInner.scrollLeft;//当前滚动条的位置
            var end = i * oImgs[0].offsetWidth;//每次动画的结束位置
            var startStep = 0;
            var endStep = 44;
            var everyStep = (end - start) / (endStep - startStep);//每一步所走的距离

            //让滚动条条动画移动
            timer2 = setInterval(function () {

                startStep ++;//用来判断动画是否执行完毕
                if (startStep >= endStep) {
                    clearInterval(timer2);
                    flag = !flag;
                }

                // oInner.scrollLeft += everyStep;//scroll直接参与运算是向下取整的，start是默认当前滚动条位置，所以让变量start运算即可

                start += everyStep;
                oInner.scrollLeft = start;
            },20)
        }

        //自动走函数
        function autoMove(){
            //每隔两秒就换图
            timer1 = setInterval(function () {
                // 在每一次新的一个动画开始的时候，先把上一次的动画给清掉
                clearInterval(timer2);
                i ++;
                if (i >= oImgs.length){
                    i = 1;
                    oInner.scrollLeft = 0;
                }
                move();
                page();
            },2000)
        };

        //清计时器
        function clear(){
            clearInterval(timer1);
            clearInterval(timer2);
        }

        //下标跟着走函数
        function page() {
            // 让下标跟着图片
            var page = i;
            for (var j = 0; j < oLis.length; j++) {
                if (page >= oImgs.length - 1) {
                    page = 0;
                }
                if( page == j ){
                    oLis[j].classList.add("show");
                }else{
                    oLis[j].classList.remove("show");
                }
            }
        }

        //页面加载后 自动走
        autoMove();

        //点击左边按钮
        oRight.onclick = function () {
            if (flag){
                return;
            }
            //先把所有计时器给清掉
            clear();
            i ++;
            if (i >= oImgs.length){
                i = 1;
                oInner.scrollLeft = 0;
            }
            move();
            page();
            //每次点击事件执行完成后，执行自动走
            autoMove();
        }

        //点击右边按钮
        oLeft.onclick = function(){
            console.log(flag);
            if (flag){
                return;
            }
            clear();
            i --;
            if (i < 0){
                i = oImgs.length - 2;
                oInner.scrollLeft = (oImgs.length - 1) * oImgs[i].offsetWidth;

            }
            move();
            page();
            autoMove();
        }


        //给下标绑定点击事件
        for (var j = 0; j < oLis.length; j++) {
            oLis[j].onclick = function () {
                clear();
                for (var k = 0; k < oLis.length; k++) {
                    if (oLis[k] == this){
                        oLis[k].classList.add("show");

                        //i是图片轮播的核心，所以让i和当前点击的下标相等
                        i = k
                        move();
                        autoMove()
                    }else{
                        oLis[k].classList.remove("show");
                    }
                }
            }
        }
    }
</script>
</body>
</html>
```



## 懒加载

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1ggwnjj1cztg30o90dw1ky.gif)

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>延迟加载（懒加载）</title>
    <link rel="stylesheet" href="./reset.css">
    <style>
        .box{
            width: 1040px;
            margin: 0 auto;
            overflow: hidden;
        }
        .box img{
            width: 500px;
            height: 300px;
            margin: 10px;
            float: left;
        }
    </style>
</head>
<body>
<div id="box" class="box">
    <img src="../images/loading.gif" orc="../images/01.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/02.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/03.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/04.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/05.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/06.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/07.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/08.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/09.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/10.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/11.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/12.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/13.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/14.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/15.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/16.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/17.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/18.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/19.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/20.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/21.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/22.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/23.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/24.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/25.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/26.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/27.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/28.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/29.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/30.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/31.jpg" alt="">
    <img src="../images/loading.gif" orc="../images/32.jpg" alt="">

</div>
<script src="./my.js"></script>
<script>
    // 页面加载图片等资源的时候，要花费大量的时间和带宽，如果说进行懒加载 则节省流量

    var oBox = my.getID("box");
    var oImgs = oBox.getElementsByTagName("img");
    var flag = true;
    // 定义一个变量，保存已经加载过的图片数量 默认为0
    var n = 0;
    //当页面滚动滚动条的时候，开启节流函数
    window.onscroll = function(){
        //当开关是关闭的状态 那么就不执行函数
        if(!flag){
            return;
        }

        // 当flag开启了 进入功能函数执行了，我们要先把开关给关闭了
        flag = !flag;
        //调用函数
        lazyLoad();
        /*当函数执行完成以后，延迟200毫秒 再把开关打开，下一次的事件才能进来
        这样可以节省很多次函数的运行  并且用户体验也不会变差*/
        setTimeout(function () {
            flag = ! flag;
        },200)

    }
    //当页面刚进入的时候  先调用一次判断函数 看是否加载图片
    lazyLoad();
    function lazyLoad() {
        //1.获取系统滚动条滚过去的距离
        // my.getWinScroll().top
        //2.获取屏幕窗口的高度
        //my.getScreen().height

        /*3、只要函数被调用，那么就遍历所有的img
        当img距离文档顶部长度 小于等于  滚动条滚过去的距离+窗口的高度   那么就进行加载图片*/

        for (var i = n; i < oImgs.length; i++) {
            if (my.getEleToDoc(oImgs[i]).top <= my.getWinScroll().top + my.getScreen().height) {
                oImgs[i].src = oImgs[i].getAttribute("orc");
                // 每次有图片加载 就让n+1
                // 每次刚开始for循环的时候  就让i赋值为n 可以跳过已经加载过的图片  增加效率
                n ++;
            }
        }
    }
</script>
</body>
</html>
```



## 拖拽

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1ggwnv7rp6kg30m70dwta6.gif)

### 方法1

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>拖拽方法一</title>
    <link rel="stylesheet" href="./reset.css">
    <style>
        #box{
            width: 100px;
            height: 100px;
            background-color: red;
            position: absolute;
            left: 0;
            top: 0;
        }
    </style>
</head>
<body>
<div id="box">

</div>
<script>
    var oBox = document.getElementById("box");
    // 对obox绑定鼠标按下事件
    oBox.onmousedown = function (ev) {
        var ev = ev ||window.event;
        // 获取鼠标距离当前元素边缘的距离 ，这个距离是一直不会发生改变的
        var mouseDown = {
            left:ev.clientX - oBox.getBoundingClientRect().left,
            top:ev.clientY - oBox.getBoundingClientRect().top
        }
        document.onmousemove = function(ev){
            var ev = ev || window.event;
            //最终鼠标的位置用对象来保存
            var boxPoint = {
                left:ev.clientX - mouseDown.left,
                top:ev.clientY - mouseDown.top
            }
            //赋值
            oBox.style.left = boxPoint.left + "px";
            oBox.style.top = boxPoint.top + "px";
        }

        // 鼠标松开以后，move事件不再执行
        document.onmouseup = function () {
            // 清除事件 只需要给事件赋值为null即可
            document.onmousemove = null;
            //松开的时候页面上不允许有事件残留，所以把up事件也清了，让再次按下鼠标 就又绑定上去了在·
            document.onmouseup = null;
        }

    }
</script>
</body>
</html>
```



### 方法二

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>拖拽方法二</title>
    <link rel="stylesheet" href="./reset.css">
    <style>
        #box{
            width: 100px;
            height: 100px;
            background-color: red;
            position: absolute;
            left: 0;
            top: 0;
        }
    </style>
</head>
<body>
<div id="box">

</div>
<script>
    var oBox = document.getElementById("box");
    // 对obox绑定鼠标按下事件
    oBox.onmousedown = function (ev) {
        var ev = ev ||window.event;
        // 获取按下的时候鼠标的位置
        var mouseDown = {
            left:ev.clientX,
            top:ev.clientY
        }
        // 获取按下的时候 元素的距离左边缘和上边缘的位置
        var oBoxToDoc = {
            left:oBox.getBoundingClientRect().left,
            top:oBox.getBoundingClientRect().top
        }
        console.log(mouseDown)
        document.onmousemove = function(ev){
            var ev = ev || window.event;
            //最终鼠标的位置用对象来保存
            var boxPoint = {
                left:ev.clientX - mouseDown.left + oBoxToDoc.left,
                top:ev.clientY - mouseDown.top + oBoxToDoc.top
            }
            //赋值
            oBox.style.left = boxPoint.left + "px";
            oBox.style.top = boxPoint.top + "px";
        }

        // 鼠标松开以后，move事件不再执行
        document.onmouseup = function () {
            // 清除事件 只需要给事件赋值为null即可
            document.onmousemove = null;
            //松开的时候页面上不允许有事件残留，所以把up事件也清了，让再次按下鼠标 就又绑定上去了在·
            document.onmouseup = null;
        }

    }
</script>
</body>
</html>
```



### 方法3

```html

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>拖拽方法三</title>
    <link rel="stylesheet" href="./reset.css">
    <style>
        #box{
            width: 100px;
            height: 100px;
            background-color: red;
            position: absolute;
            left: 0;
            top: 0;
        }
    </style>
</head>
<body>
<div id="box">

</div>
<script>
    var oBox = document.getElementById("box");
    // 对obox绑定鼠标按下事件
    oBox.onmousedown = function (ev) {
        var ev = ev ||window.event;
        // 获取鼠标距离当前元素边缘的距离
        var mouseDown = {
            left:ev.offsetX,
            top:ev.offsetY
        }
        document.onmousemove = function(ev){
            var ev = ev || window.event;
            //最终鼠标的位置用对象来保存
            var boxPoint = {
                left:ev.clientX - mouseDown.left,
                top:ev.clientY - mouseDown.top
            }
            //赋值
            oBox.style.left = boxPoint.left + "px";
            oBox.style.top = boxPoint.top + "px";
        }

        // 鼠标松开以后，move事件不再执行
        document.onmouseup = function () {
            // 清除事件 只需要给事件赋值为null即可
            document.onmousemove = null;
            //松开的时候页面上不允许有事件残留，所以把up事件也清了，让再次按下鼠标 就又绑定上去了在·
            document.onmouseup = null;
        }

    }
</script>
</body>
</html>
```



## 自定义滚动条

### 小滑块

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1ggxv49zzehg30qp0dwq4p.gif)

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>自定义滚动条样式版</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        html,body{
            height: 100%;
        }
        #wrap{
            width: 40px;
            height: 100%;
            background-color: #ccc;
            position: fixed;
            right: 0;
            top: 0;
        }
        #wrap #inner{
            width: 40px;
            height: 60px;
            position: absolute;
            background-color: orangered;
            top: 40px;
            left: 0;
        }
    </style>
</head>
<body>
<div id="con">

</div>

<div id="wrap">
    <div id="inner"></div>
</div>
<script>
    var oCon = document.getElementById("con");
    var oWrap = document.getElementById("wrap");
    var oInner = document.getElementById("inner");

    //自动生成一些内容填充
    for (var i = 0; i < 20; i++) {
        oCon.innerHTML += i +"<br>";
    }

    // 定义滚动条功能
    oInner.onmousedown = function (e) {
        e.preventDefault();
        var mouseDownTop = e.offsetY;

        document.onmousemove = function (e) {
            e.preventDefault();
            var mouseMoveTop = e.clientY - mouseDownTop;
            if (mouseMoveTop <= 0){
                mouseMoveTop = 0;
            } else if(mouseMoveTop >= oWrap.clientHeight - oInner.offsetHeight){
                mouseMoveTop = oWrap.clientHeight - oInner.offsetHeight;
            }

            oInner.style.top = mouseMoveTop + "px";
        }

        document.onmouseup = function () {
            document.onmousemove = document.onmouseup = null;
        }
    }
</script>
</body>
</html>
```



### 基础滚动

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1ggxv8h3k2wg30pb0dwgqm.gif)

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>自定义滚动条基础版</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        html,body{
            height: 100%;
            overflow: hidden;
        }
        #wrap{
            width: 40px;
            background-color: #ccc;
            position: fixed;
            height: 100%;
            right: 0;
            top: 0;
        }
        #wrap #inner{
            width: 40px;
            height: 60px;
            position: absolute;
            background-color: orangered;
            top: 0px;
            left: 0;
        }
    </style>
</head>
<body>
<div id="con">

</div>

<div id="wrap">
    <div id="inner"></div>
</div>
<script>
    var oCon = document.getElementById("con");
    var oWrap = document.getElementById("wrap");
    var oInner = document.getElementById("inner");

    //自动生成一些内容填充
    for (var i = 0; i < 300; i++) {
        oCon.innerHTML += i +"<br>";
    }



    // 定义滚动条功能
    oInner.onmousedown = function (e) {
        e.preventDefault();
        var mouseDownTop = e.offsetY;

        document.onmousemove = function (e) {
            e.preventDefault();
            var mouseMoveTop = e.clientY - mouseDownTop;
            if (mouseMoveTop <= 0){
                mouseMoveTop = 0;
            } else if(mouseMoveTop >= oWrap.clientHeight - oInner.offsetHeight){
                mouseMoveTop = oWrap.clientHeight - oInner.offsetHeight;
            }

            // 比例公式：小滑块滑动的距离/小滑块可以滑动的距离 = con向上走的距离/con能走的距离
            var scale = mouseMoveTop / (oWrap.clientHeight - oInner.offsetHeight);
            var conmoveTop = (oCon.offsetHeight - document.documentElement.clientHeight) * scale;
            oInner.style.top = mouseMoveTop + "px";
            oCon.style.marginTop = - conmoveTop + "px";
        }

        document.onmouseup = function () {
            document.onmousemove = document.onmouseup = null;
        }
    }
</script>
</body>
</html>
```



### 滑块自动高度

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>自定义滚动条基础版</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        html,body{
            height: 100%;
            overflow: hidden;
        }
        #wrap{
            width: 40px;
            background-color: #ccc;
            position: fixed;
            height: 100%;
            right: 0;
            top: 0;
        }
        #wrap #inner{
            width: 40px;
            height: 60px;
            position: absolute;
            background-color: orangered;
            top: 0px;
            left: 0;
        }
    </style>
</head>
<body>
<div id="con">

</div>

<div id="wrap">
    <div id="inner"></div>
</div>
<script>
    var oCon = document.getElementById("con");
    var oWrap = document.getElementById("wrap");
    var oInner = document.getElementById("inner");

    //自动生成一些内容填充
    for (var i = 0; i < 200; i++) {
        oCon.innerHTML += i +"<br>";
    }

    //生成滑块的高度
    var scale = document.documentElement.clientHeight / oCon.offsetHeight;
    var innerHeight = scale * oWrap.offsetHeight;
    oInner.style.height = innerHeight + "px";


    // 定义滚动条功能
    oInner.onmousedown = function (e) {
        e.preventDefault();
        var mouseDownTop = e.offsetY;

        document.onmousemove = function (e) {
            e.preventDefault();
            var mouseMoveTop = e.clientY - mouseDownTop;
            if (mouseMoveTop <= 0){
                mouseMoveTop = 0;
            } else if(mouseMoveTop >= oWrap.clientHeight - oInner.offsetHeight){
                mouseMoveTop = oWrap.clientHeight - oInner.offsetHeight;
            }

            // 比例公式：小滑块滑动的距离/小滑块可以滑动的距离 = con向上走的距离/con能走的距离
            var scale = mouseMoveTop / (oWrap.clientHeight - oInner.offsetHeight);
            var conmoveTop = (oCon.offsetHeight - document.documentElement.clientHeight) * scale;
            oInner.style.top = mouseMoveTop + "px";
            oCon.style.marginTop = - conmoveTop + "px";
        }

        document.onmouseup = function () {
            document.onmousemove = document.onmouseup = null;
        }
    }
</script>
</body>
</html>
```



### 滑块自动高度 合成比例

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>自定义滚动条基础版</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        html,body{
            height: 100%;
            overflow: hidden;
        }
        #wrap{
            width: 40px;
            background-color: #ccc;
            position: fixed;
            height: 100%;
            right: 0;
            top: 0;
        }
        #wrap #inner{
            width: 40px;
            height: 60px;
            position: absolute;
            background-color: orangered;
            top: 0px;
            left: 0;
        }
    </style>
</head>
<body>
<div id="con">

</div>

<div id="wrap">
    <div id="inner"></div>
</div>
<script>
    var oCon = document.getElementById("con");
    var oWrap = document.getElementById("wrap");
    var oInner = document.getElementById("inner");

    //自动生成一些内容填充
    for (var i = 0; i < 200; i++) {
        oCon.innerHTML += i +"<br>";
    }

    //生成滑块的高度
    var scale = document.documentElement.clientHeight / oCon.offsetHeight;
    var innerHeight = scale * oWrap.offsetHeight;
    oInner.style.height = innerHeight + "px";


    // 定义滚动条功能
    oInner.onmousedown = function (e) {
        e.preventDefault();
        var mouseDownTop = e.offsetY;

        document.onmousemove = function (e) {
            e.preventDefault();
            var mouseMoveTop = e.clientY - mouseDownTop;
            if (mouseMoveTop <= 0){
                mouseMoveTop = 0;
            } else if(mouseMoveTop >= oWrap.clientHeight - oInner.offsetHeight){
                mouseMoveTop = oWrap.clientHeight - oInner.offsetHeight;
            }

            // 直接使用 定义滑块高度的比例即可
            oInner.style.top = mouseMoveTop + "px";
            oCon.style.marginTop = - mouseMoveTop / scale + "px";
        }

        document.onmouseup = function () {
            document.onmousemove = document.onmouseup = null;
        }
    }
</script>
</body>
</html>
```



### 滚轮事件

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>滚轮事件</title>
    <style>
        #box{
            width: 200px;
            height: 200px;
            background-color: red;
        }
    </style>
</head>
<body>
<div id="box">

</div>
<script>
    /*
    * 滚轮事件：
    *   ie/谷歌：
    *       onmousewheel（DOM0级既可以绑定）
    *       ev.wheelDelta:
    *           滚轮向下拨：  负
    *           滚轮向上拨：  正
    *
    *   火狐：
    *       DOMMouseScroll（DOM2级事件）:
    *           e.detail
    *               滚轮向下拨：  正
    *               滚轮向上拨：  负
    * */

    var oBox = document.getElementById("box");
    var x = 200;
    /*oBox.onmousewheel = function (e) {
        var e = e || window.event;
        if (e.wheelDelta > 0){
            x --;
        } else{
            x ++;
        }
        oBox.style.width = x + "px";
    }


    oBox.addEventListener("DOMMouseScroll",function (e) {
        console.log(e);
        if(e.detail > 0){
            x ++;
        }else{
            x --;
        }
        oBox.style.width = x + "px";
    })*/
    
    // 封装滚轮事件兼容
    function mouseScroll(e) {
        var e = e || window.event;
        if (e.detail){
            if(e.detail > 0){
                x ++;
            }else{
                x --;
            }
        } else{
            if (e.wheelDelta > 0){
                x --;
            } else{
                x ++;
            }
        }
        oBox.style.width = x + "px";
    }
    //火狐调用
    oBox.addEventListener("DOMMouseScroll",mouseScroll);
    // 谷歌调用
    oBox.onmousewheel = mouseScroll;
</script>
</body>
</html>
```



### 自定义滚动条滚轮版

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>自定义滚动条基础版</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        html,body{
            height: 100%;
            overflow: hidden;
        }
        #wrap{
            width: 40px;
            background-color: #ccc;
            position: fixed;
            height: 100%;
            right: 0;
            top: 0;
        }
        #wrap #inner{
            width: 40px;
            height: 60px;
            position: absolute;
            background-color: orangered;
            top: 0px;
            left: 0;
        }
    </style>
</head>
<body>
<div id="con">

</div>

<div id="wrap">
    <div id="inner"></div>
</div>
<script>
    var oCon = document.getElementById("con");
    var oWrap = document.getElementById("wrap");
    var oInner = document.getElementById("inner");

    //自动生成一些内容填充
    for (var i = 0; i < 200; i++) {
        oCon.innerHTML += i +"<br>";
    }

    //生成滑块的高度
    var scale = document.documentElement.clientHeight / oCon.offsetHeight;
    var innerHeight = scale * oWrap.offsetHeight;
    oInner.style.height = innerHeight + "px";


    // 定义滚动条功能
    oInner.onmousedown = function (e) {
        e.preventDefault();
        var mouseDownTop = e.offsetY;

        document.onmousemove = function (e) {
            e.preventDefault();
            var mouseMoveTop = e.clientY - mouseDownTop;
            if (mouseMoveTop <= 0){
                mouseMoveTop = 0;
            } else if(mouseMoveTop >= oWrap.clientHeight - oInner.offsetHeight){
                mouseMoveTop = oWrap.clientHeight - oInner.offsetHeight;
            }

            // 直接使用 定义滑块高度的比例即可
            oInner.style.top = mouseMoveTop + "px";
            oCon.style.marginTop = - mouseMoveTop / scale + "px";
        }

        document.onmouseup = function () {
            document.onmousemove = document.onmouseup = null;
        }
    }

    //滚轮事件
    document.onmousewheel = mouseScroll;
    document.addEventListener("DOMMouseScroll",mouseScroll);
    function mouseScroll(e) {
        var x = oInner.offsetTop;
        if (e.wheelDelta) {
            if (e.wheelDelta < 0){
                x += 5;
            }else{
                x -= 5;
            }
        }else{
            if (e.detail < 0){
                x -= 5;
            } else{
                x += 5;
            }
        }

        if (x <= 0){
            x = 0;
        } else if(x >= oWrap.clientHeight - oInner.offsetHeight){
            x = oWrap.clientHeight - oInner.offsetHeight
        }

        oInner.style.top = x + "px";
        oCon.style.marginTop = - x / scale + "px";
    }


</script>
</body>
</html>
```

